{{ define "load-static-css" }}
    {{ range (readDir $.dir) }}
        {{ $path := printf "%v/%v" $.dir .Name }}
        {{ if .IsDir }}
            {{ template "load-static-css" (dict "suffix" $.suffix "dir" $path) }}
        {{ else }}
            <!-- For each static directory we want to strip anything before static -->
            {{ $sections := split $path "static" }}
            {{ $path = index $sections 1 }}

            {{ if strings.HasSuffix $path $.suffix  }}
                <link rel="stylesheet" href="{{ $path }}">
            {{ end }}
        {{ end }}
    {{ end }}
{{end}}

{{ range .Site.Data.staticdirs }}
    {{ $dict := (dict "suffix" $.Params.Suffix "dir" .) }}
    {{ template "load-static-css" $dict }}
{{ end }}